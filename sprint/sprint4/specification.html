<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>360 Life Stream :: Functional Specification - Sprint 4</title>
    <meta name="description" content="This portion of the website highlights the functional specification for the fourth development sprint. This functional specification includes use cases, requ...">

    <link rel="stylesheet" href="/360ls/css/main.css">
    <link rel="canonical" href="http://dongy7.github.io/360ls/sprint/sprint4/specification">
    <link rel="alternate" type="application/rss+xml" title="360 Life Stream" href="http://dongy7.github.io/360ls/feed.xml" />

    <link href='https://fonts.googleapis.com/css?family=EB+Garamond' rel='stylesheet' type='text/css'>
</head>


  <body>
  <div class="page">
    <header class="site-header">
    <a class="site-title" href="/360ls/">360 Life Stream</a>
    <nav class="site-nav">
        <a href="#" class="menu-icon menu.open">
            <svg viewBox="0 0 18 15">
                <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
                <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
                <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
        </a>
        <div class="trigger"><h1>Main Navigation</h1>
            <ul class="menu">
    
        
            <li><a href="/360ls" class="page-link">General Materials</a>
            <ul class="sub-menu">
            
                
                    <li><a href="/360ls/general/intro">Project Introduction</a></li>
                
                    </li>
            
                
                    <li><a href="/360ls/general/schedule">Schedule of Standing Meetings</a></li>
                
                    </li>
            
                
                    <li><a href="/360ls/general/contact">Contact Information</a></li>
                
                    </li>
            
                
                    <li><a href="/360ls/general/rules">Team Rules</a></li>
                
                    </li>
            
                
                    <li><a href="/360ls/general/journal">Journal</a></li>
                
                    </li>
            
                
                    <li><a href="/360ls/general/links">Related Links</a></li>
                
                    </li>
            
            </ul>
        
            </li>
    
        
            <li><a href="/360ls" class="page-link">Requirements Deliverables</a>
            <ul class="sub-menu">
            
                
                    <li><a href="/360ls/requirements/concept">Project Concept</a></li>
                
                    </li>
            
                
                    <li><a href="/360ls/requirements/personas">Personas</a></li>
                
                    </li>
            
                
                    <li><a href="/360ls/requirements/stories">User Stories</a></li>
                
                    </li>
            
                
                    <li><a href="/360ls/requirements/platform">Platform Analysis and Selection</a></li>
                
                    </li>
            
                
                    <li>
                        <a href="/360ls/requirements/functionalspec.html">Functional Spec</a>
                        <ul class="sub-menu">
                            
                            <li><a href="/360ls/requirements/functionalspec/usecases">Use Cases</a><li>
                            
                            <li><a href="/360ls/requirements/functionalspec/requirements">Requirements</a><li>
                            
                            <li><a href="/360ls/requirements/functionalspec/interfaces">Interfaces</a><li>
                            
                        </ul>
                    </li>
                
                    </li>
            
                
                    <li><a href="/360ls/requirements/prototype">Prototype</a></li>
                
                    </li>
            
            </ul>
        
            </li>
    
        
            <li><a href="/360ls" class="page-link">Sprint Deliverables</a>
            <ul class="sub-menu">
            
                
                    <li>
                        <a href="/360ls/sprint/sprint1.html">Sprint 1</a>
                        <ul class="sub-menu">
                            
                            <li><a href="/360ls/sprint/sprint1/specification">Functional Specification</a><li>
                            
                            <li><a href="/360ls/sprint/sprint1/design">Design Doc</a><li>
                            
                            <li><a href="/360ls/sprint/sprint1/testing">Test Plan</a><li>
                            
                            <li><a href="/360ls/sprint/sprint1/manual">User Manual</a><li>
                            
                            <li><a href="/360ls/sprint/sprint1/code">Executable Code and Instructions</a><li>
                            
                        </ul>
                    </li>
                
                    </li>
            
                
                    <li>
                        <a href="/360ls/sprint/sprint2.html">Sprint 2</a>
                        <ul class="sub-menu">
                            
                            <li><a href="/360ls/sprint/sprint2/specification">Functional Specification</a><li>
                            
                            <li><a href="/360ls/sprint/sprint2/design">Design Doc</a><li>
                            
                            <li><a href="/360ls/sprint/sprint2/testing">Test Plan</a><li>
                            
                            <li><a href="/360ls/sprint/sprint2/manual">User Manual</a><li>
                            
                            <li><a href="/360ls/sprint/sprint2/code">Executable Code and Instructions</a><li>
                            
                        </ul>
                    </li>
                
                    </li>
            
                
                    <li>
                        <a href="/360ls/sprint/sprint3.html">Sprint 3</a>
                        <ul class="sub-menu">
                            
                            <li><a href="/360ls/sprint/sprint3/specification">Functional Specification</a><li>
                            
                            <li><a href="/360ls/sprint/sprint3/design">Design Doc</a><li>
                            
                            <li><a href="/360ls/sprint/sprint3/testing">Test Plan</a><li>
                            
                            <li><a href="/360ls/sprint/sprint3/manual">User Manual</a><li>
                            
                            <li><a href="/360ls/sprint/sprint3/code">Executable Code and Instructions</a><li>
                            
                        </ul>
                    </li>
                
                    </li>
            
                
                    <li>
                        <a href="/360ls/sprint/sprint4.html">Sprint 4</a>
                        <ul class="sub-menu">
                            
                            <li><a href="/360ls/sprint/sprint4/specification">Functional Specification</a><li>
                            
                            <li><a href="/360ls/sprint/sprint4/design">Design Doc</a><li>
                            
                            <li><a href="/360ls/sprint/sprint4/testing">Test Plan</a><li>
                            
                            <li><a href="/360ls/sprint/sprint4/manual">User Manual</a><li>
                            
                            <li><a href="/360ls/sprint/sprint4/code">Executable Code and Instructions</a><li>
                            
                        </ul>
                    </li>
                
                    </li>
            
                
                    <li><a href="/360ls/sprint/repository">Version-Controlled Repository</a></li>
                
                    </li>
            
            </ul>
        
            </li>
    
</ul>

        </div>
    </nav>
</header>


    <div class="post">
    <header class="post-header">
        <h1>Functional Specification - Sprint 4</h1>
    </header>

    <p>This portion of the website highlights the functional specification for the fourth development sprint. This functional specification includes use cases, requirements, and interfaces targeted and achieved during that sprint.</p>

<h1 id="use-cases">Use Cases</h1>

<h2 id="use-cases-targeted">Use Cases Targeted</h2>

<h3 id="web-application">Web Application</h3>
<ul>
  <li>Watch Live Video
    <ul>
      <li>See live stream in browser via web player</li>
      <li>Change video display quality</li>
    </ul>
  </li>
  <li>Watch Archived Video
    <ul>
      <li>Watch saved videos in browser via web player</li>
      <li>Pause the video</li>
      <li>Rewind the video</li>
      <li>Full screen the video</li>
      <li>Change video display quality</li>
    </ul>
  </li>
</ul>

<h3 id="on-box-application">On-box Application</h3>
<ul>
  <li>Display a Stitched Video (use case of program to enable watching live video)
    <ul>
      <li>Take video input from two camera feeds, correct distortion, and stitch it into one video</li>
      <li>Correct distortion on videos</li>
      <li>Recognize when a feed is dead or occluded for adaptive stitching</li>
    </ul>
  </li>
  <li>Stream Video (use case of program to enable streamed video in on-box and web applications)
    <ul>
      <li>Send stitched video to a server for storage</li>
      <li>Send stitched video to RTMP stream for consumption</li>
    </ul>
  </li>
  <li>Stitch and Stream Video from Desktop Application
    <ul>
      <li>Combine stitching and streaming of video and allow for calling within the Desktop application</li>
    </ul>
  </li>
  <li>Watch Live Video
    <ul>
      <li>See the situation around the car from a live on-latency feed on the in-car box.</li>
      <li>See live video in a simple player</li>
    </ul>
  </li>
  <li>Watch Archived Videos
    <ul>
      <li>Pause the video</li>
      <li>Rewind the video</li>
      <li>Full screen the video</li>
    </ul>
  </li>
  <li>Filter Archived Videos
    <ul>
      <li>Scroll through a list of all videos associated with the user’s account.</li>
      <li>Filter to find video by date, etc.</li>
    </ul>
  </li>
  <li>Flag Videos for Consideration
    <ul>
      <li>Allow the user to flag a video for later consideration and tracking</li>
    </ul>
  </li>
  <li>Manually Start and Stop Recording
    <ul>
      <li>Allow the user to toggle between a recording and non-recording state.</li>
    </ul>
  </li>
</ul>

<h3 id="server-side">Server-side</h3>
<ul>
  <li>Stream Video to Client (use case of program to stream via Wowza from storage and live stitched stream)
    <ul>
      <li>Consume RTMP stream from box application</li>
      <li>Live stream stitched video from server storage and live device stitched footage to client players.</li>
    </ul>
  </li>
</ul>

<h2 id="use-cases-realized">Use Cases Realized</h2>

<h3 id="web-application-1">Web Application</h3>
<ul>
  <li>Watch Live Video
    <ul>
      <li>See live stream in browser via web player</li>
      <li>Change video display quality</li>
    </ul>
  </li>
</ul>

<h3 id="on-box-application-1">On-box Application</h3>
<ul>
  <li>Display a Stitched Video (use case of program to enable watching live video)
    <ul>
      <li>Take video input from two camera feeds, correct distortion, and stitch it into one video</li>
      <li>Correct distortion on videos</li>
      <li>Recognize when a feed is dead or occluded for adaptive stitching</li>
    </ul>
  </li>
  <li>Stream Video (use case of program to enable streamed video in on-box and web applications)
    <ul>
      <li>Send stitched video to a server for storage</li>
      <li>Send stitched video to RTMP stream for consumption</li>
    </ul>
  </li>
  <li>Stitch and Stream Video from Desktop Application
    <ul>
      <li>Combine stitching and streaming of video and allow for calling within the Desktop application</li>
    </ul>
  </li>
  <li>Watch Archived Videos
    <ul>
      <li>Pause the video</li>
      <li>Rewind the video</li>
      <li>Full screen the video</li>
    </ul>
  </li>
  <li>Filter Archived Videos
    <ul>
      <li>Scroll through a list of all videos associated with the user’s account.</li>
      <li>Filter to find video by date, etc.</li>
    </ul>
  </li>
  <li>Flag Videos for Consideration
    <ul>
      <li>Allow the user to flag a video for later consideration and tracking</li>
    </ul>
  </li>
  <li>Manually Start and Stop Recording
    <ul>
      <li>Allow the user to toggle between a recording and non-recording state.</li>
    </ul>
  </li>
</ul>

<h3 id="server-side-1">Server-side</h3>
<ul>
  <li>Stream Video to Client (use case of program to stream via Wowza from storage and live stitched stream)
    <ul>
      <li>Consume RTMP stream from box application</li>
      <li>Live stream stitched video from server storage and live device stitched footage to client players.</li>
    </ul>
  </li>
</ul>

<h2 id="summary-of-use-case-fulfillment">Summary of Use Case Fulfillment</h2>
<p>During Sprint 4, we sought to have end to end functionality as follows, implemented on our box hardware:</p>

<ol>
  <li>
    <p>Receive two camera feeds</p>
  </li>
  <li>
    <p>Correct and stitch camera feeds</p>
  </li>
  <li>
    <p>Send stitched frames via RTMP to Wowza</p>
  </li>
  <li>
    <p>Stream to desktop and web applications from Wowza</p>
  </li>
</ol>

<p>We came very close to demonstrating this functionality, but we ran into issues configuring the box. After spending hours and hours configuring the box, we were able to demonstrate full functionality pieced together, even though it was not as perfect as we would have liked. That said, when we went in to demo for our client, we ran into trouble with our build and were not able to show the full end to end functionality that we had hoped to show in-person. That said, we are very close to having all of the basic functionality that we need for our project, at least with a two-camera array, and we fulfilled almost all of the use cases that we laid out for the development sprint.</p>

<h1 id="requirements">Requirements</h1>

<h2 id="requirements-targeted">Requirements Targeted</h2>
<p>At the beginning of Sprint 4, we prioritized our requirements for the sprint as follows (with prioritization representing order of approach, not necessarily in order of project value):</p>

<h3 id="priority-1">Priority 1</h3>
<ul>
  <li>The Box
    <ul>
      <li>Stitch 2 videos together and stream them to Wowza
        <ul>
          <li>Completed stitching script for local video and camera feed inputs</li>
          <li>Set up hardware to process 2 feeds for consumption in the stitching script</li>
          <li>Handle correction from within stitching algorithm</li>
        </ul>
      </li>
      <li>Create Electron box application for handling display of streams and local videos.
        <ul>
          <li>Call python script to correct, stitch, and stream feeds from within Electron</li>
        </ul>
      </li>
      <li>Set up a file system to store videos locally on the box</li>
      <li>Improve stitching algorithm to work well with live video streams, fix distortion, and use cubemap if necessary</li>
    </ul>
  </li>
</ul>

<h3 id="priority-2">Priority 2</h3>
<ul>
  <li>The Box
    <ul>
      <li>Handle flexible identification of invalid feed inputs.</li>
    </ul>
  </li>
  <li>Web Application
    <ul>
      <li>Get Django application up and running with Wowza streaming to React-enable frontend.</li>
      <li>Set up RESTful endpoint for video upload into online storage</li>
    </ul>
  </li>
  <li>Server-side
    <ul>
      <li>Get reliable Wowza streaming hosted in a PaaS offering (Heroku or AWS, preferably.)</li>
      <li>Set up storage for archival of videos</li>
    </ul>
  </li>
</ul>

<h2 id="requirements-realized">Requirements Realized</h2>
<p>After completion of Sprint 4, we were able to complete the following requirements, all that we set out to complete in one for or another.</p>

<h3 id="priority-1-1">Priority 1</h3>
<ul>
  <li>The Box
    <ul>
      <li>Stitch 2 videos together and stream them to Wowza
        <ul>
          <li>Completed stitching script for local video and camera feed inputs</li>
          <li>Set up hardware to process 2 feeds for consumption in the stitching script</li>
          <li>Handle correction from within stitching algorithm</li>
        </ul>
      </li>
      <li>Create Electron box application for handling display of streams and local videos.
        <ul>
          <li>Call python script to correct, stitch, and stream feeds from within Electron</li>
        </ul>
      </li>
      <li>Set up a file system to store videos locally on the box</li>
      <li>Improve stitching algorithm to work well with live video streams, fix distortion, and use cubemap if necessary
        <ul>
          <li>Vastly improved performance of stitching algorithm, moving from SIFT to SURF, brute-force to FLANN, and looking to move from SURF to FAST in the near future.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h3 id="priority-2-1">Priority 2</h3>
<ul>
  <li>The Box
    <ul>
      <li>Handle flexible identification of invalid feed inputs.</li>
    </ul>
  </li>
  <li>Web Application
    <ul>
      <li>Get Django application up and running with Wowza streaming to React-enable frontend.</li>
      <li>Set up RESTful endpoint for video upload into online storage</li>
    </ul>
  </li>
  <li>Server-side
    <ul>
      <li>Get reliable Wowza streaming hosted in a PaaS offering (Heroku or AWS, preferably.)</li>
      <li>Set up storage for archival of videos</li>
    </ul>
  </li>
</ul>

<h2 id="correspondance-to-original-requirements">Correspondance to Original Requirements</h2>
<p>** These requirements map to the following items from our requirements list from the beginning of the project: **</p>

<h3 id="priority-level-1">Priority Level 1</h3>

<ol>
  <li>
    <p>There will be a display of a table of all accessible archived videos. This table will be able to be filtered by date and by officer.</p>
  </li>
  <li>
    <p>The app should be able to query the database and get encoded video files</p>
  </li>
  <li>
    <p>Officers should be able to click on archived videos and see the video displayed in the player.</p>
  </li>
</ol>

<h1 id="interfaces">Interfaces</h1>
<p>The following interface views show the current state of the desktop application:
<img src="../../images/sprint4/filter.png" alt="Unfiltered View" />
<img src="../../images/sprint4/filter1.png" alt="Filtered View" />
<img src="../../images/sprint4/video.png" alt="Archived Video View" />
<img src="../../images/sprint4/settings.png" alt="Settings View" /></p>

<p>Also, the CLI for testing the stitching and streaming funcationality of the application has been vastly improved. Here is an example of that improvement:
<img src="../../images/sprint4/CLI.png" alt="Testing CLI" /></p>

<p>As far as interfaces go, we also cleaned up our website navigation menu. Working with it in the past was messy when trying to navigate to different aspects of different sprints, so we cleaned up the CSS to make sure that menus did not overlap and confuse the user. This is what it looks like now:</p>

<p><img src="../../images/sprint4/navbar.png" alt="Navbar Fix" /></p>


</div>


    <footer class="site-footer">
    Project page for 360 Life Stream<br />

    Using <a href="http://jekyllrb.com/">Jekyll</a>
    
     :: <a href="https://github.com/dongy7/360ls">Website source</a>
    
    
</footer>


    

    </div>
  </body>

</html>
